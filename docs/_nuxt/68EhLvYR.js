var L=Object.defineProperty;var k=(l,t,s)=>t in l?L(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s;var p=(l,t,s)=>k(l,typeof t!="symbol"?t+"":t,s);import{_ as q}from"./B5jSB1xc.js";import{O as d}from"./D3Mqfikn.js";import{S as E,P as O,W as P,V as W,a as G,M as V,B as F,b as H,L as I,c as N,d as T,e as B,C as z}from"./DQ4UCc7_.js";import{O as J}from"./C7Qk42do.js";import{n as K,m as Q,w as U,o as X,a as _}from"./ezY9ZAhu.js";const se={__name:"rapier-01",setup(l){class t{constructor(e,r){p(this,"mesh");p(this,"world");p(this,"enabled",!0);this.world=r,this.mesh=new I(new N,new T({color:16777215,vertexColors:!0})),this.mesh.frustumCulled=!1,e.add(this.mesh)}update(){if(this.enabled){const{vertices:e,colors:r}=this.world.debugRender();this.mesh.geometry.setAttribute("position",new B(e,3)),this.mesh.geometry.setAttribute("color",new B(r,4)),this.mesh.visible=!0}else this.mesh.visible=!1}}return K(async()=>{await d.init();let s={x:0,y:-9.81,z:0},e=new d.World(s),r=d.ColliderDesc.cuboid(100,.1,100);e.createCollider(r);let S=d.RigidBodyDesc.dynamic().setTranslation(0,1,0),D=e.createRigidBody(S),R=d.ColliderDesc.cuboid(.5,.5,.5);e.createCollider(R,D);let f=[];const u=document.querySelector("#app-rapier"),g=u.offsetWidth,y=u.offsetHeight,c=new E,x=new z,h=new O(75,g/y,.1,100);h.position.set(0,2,5);const v=new t(c,e),o=new P({antialias:!0});o.setSize(g,y),o.shadowMap.enabled=!0,o.shadowMap.type=W,u.appendChild(o.domElement),o.domElement.style.width="100%",o.domElement.style.height="100%";const a=new G(void 0,Math.PI*10);a.position.set(2.5,5,5),a.angle=Math.PI/3,a.penumbra=.5,a.castShadow=!0,a.shadow.blurSamples=10,a.shadow.radius=5,c.add(a);const b=a.clone();b.position.set(-2.5,5,5),c.add(b);const w=new J(h,o.domElement);w.enableDamping=!0,w.target.y=1;const C=(n=10)=>Math.random()*(n*2)-n;for(let n=0;n<50;n++){const i=new V(new F(1,1,1),new H);i.castShadow=!0,c.add(i);const m=e.createRigidBody(d.RigidBodyDesc.dynamic().setTranslation(C(20),5,C(20)).setCanSleep(!1)),A=d.ColliderDesc.cuboid(.5,.5,.5).setMass(1).setRestitution(1.1);e.createCollider(A,m),f.push([i,m])}const M=()=>{f.map(([i,m])=>{i.position.copy(m.translation()),i.quaternion.copy(m.rotation())});const n=x.getDelta();e.timestep=Math.min(n,.1),e.step(),w.update(),v.update(),o.render(c,h),requestAnimationFrame(M)};requestAnimationFrame(M)}),(s,e)=>{const r=q;return X(),Q(r,{name:"main"},{default:U(()=>e[0]||(e[0]=[_("a",{href:""},"Rapier",-1),_("div",{id:"app-rapier",style:{width:"100%",height:"400px",position:"relative"}},null,-1)])),_:1})}}};export{se as default};
