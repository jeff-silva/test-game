var L=Object.defineProperty;var k=(l,t,s)=>t in l?L(l,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[t]=s;var u=(l,t,s)=>k(l,typeof t!="symbol"?t+"":t,s);import{_ as q}from"./De-ZG0C9.js";import{O as d,a as E}from"./DLb91F2m.js";import{S as P,P as W,W as G,V as O,a as V,M as F,B as H,b as I,L as N,c as T,d as z,e as B,C as J}from"./OOJU6yUV.js";import{n as K,m as Q,w as U,o as X,a as _}from"./B6jcXzCi.js";const te={__name:"rapier-01",setup(l){class t{constructor(e,r){u(this,"mesh");u(this,"world");u(this,"enabled",!0);this.world=r,this.mesh=new N(new T,new z({color:16777215,vertexColors:!0})),this.mesh.frustumCulled=!1,e.add(this.mesh)}update(){if(this.enabled){const{vertices:e,colors:r}=this.world.debugRender();this.mesh.geometry.setAttribute("position",new B(e,3)),this.mesh.geometry.setAttribute("color",new B(r,4)),this.mesh.visible=!0}else this.mesh.visible=!1}}return K(async()=>{await d.init();let s={x:0,y:-9.81,z:0},e=new d.World(s),r=d.ColliderDesc.cuboid(100,.1,100);e.createCollider(r);let S=d.RigidBodyDesc.dynamic().setTranslation(0,1,0),D=e.createRigidBody(S),R=d.ColliderDesc.cuboid(.5,.5,.5);e.createCollider(R,D);let f=[];const p=document.querySelector("#app-rapier"),g=p.offsetWidth,y=p.offsetHeight,c=new P,x=new J,h=new W(75,g/y,.1,100);h.position.set(0,2,5);const v=new t(c,e),o=new G({antialias:!0});o.setSize(g,y),o.shadowMap.enabled=!0,o.shadowMap.type=O,p.appendChild(o.domElement),o.domElement.style.width="100%",o.domElement.style.height="100%";const a=new V(void 0,Math.PI*10);a.position.set(2.5,5,5),a.angle=Math.PI/3,a.penumbra=.5,a.castShadow=!0,a.shadow.blurSamples=10,a.shadow.radius=5,c.add(a);const b=a.clone();b.position.set(-2.5,5,5),c.add(b);const w=new E(h,o.domElement);w.enableDamping=!0,w.target.y=1;const C=(n=10)=>Math.random()*(n*2)-n;for(let n=0;n<50;n++){const i=new F(new H(1,1,1),new I);i.castShadow=!0,c.add(i);const m=e.createRigidBody(d.RigidBodyDesc.dynamic().setTranslation(C(20),5,C(20)).setCanSleep(!1)),A=d.ColliderDesc.cuboid(.5,.5,.5).setMass(1).setRestitution(1.1);e.createCollider(A,m),f.push([i,m])}const M=()=>{f.map(([i,m])=>{i.position.copy(m.translation()),i.quaternion.copy(m.rotation())});const n=x.getDelta();e.timestep=Math.min(n,.1),e.step(),w.update(),v.update(),o.render(c,h),requestAnimationFrame(M)};requestAnimationFrame(M)}),(s,e)=>{const r=q;return X(),Q(r,{name:"main"},{default:U(()=>e[0]||(e[0]=[_("a",{href:""},"Rapier",-1),_("div",{id:"app-rapier",style:{width:"100%",height:"400px",position:"relative"}},null,-1)])),_:1})}}};export{te as default};
